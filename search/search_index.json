{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"xTrainAPI - Unified Model Train Control Welcome to the xTrainAPI project! This repository contains a C++-based API for controlling digital model trains and their accessories. Summary xTrainAPI is a unified interface designed to control various digital model train systems through a single, consistent API. It simplifies the development of control software by abstracting the complexities of individual protocols, such as DCC and M\u00e4rklin Motorola. The API is defined in C++ as an abstract interface ( IUnifiedModelTrainListener ) and serves as the \"Single Source of Truth.\" All other artifacts, including XML schemas, the OpenAPI specification, and utility classes, are derived from this central C++ header file. This repository provides the core API, documentation, and a set of examples to help you get started. Documentation Our API documentation is automatically generated and hosted on GitHub Pages. Doxygen (C++ API): Detailed documentation of the C++ interface, classes, and methods can be found here: Doxygen Documentation Swagger (REST API): The specification for our REST interface, including interactive endpoints, is available here: Swagger UI Web Tool: A simple web application for interacting with the xTrainAPI is available here: Web Tool Core Concepts The API is defined in C++ as an abstract interface ( IUnifiedModelTrainListener ) and serves as the \"Single Source of Truth\". All other artifacts, such as the XML schemas and the OpenAPI specification, are derived from this C++ header file. For a deeper understanding of the terms and data fields used in the API, please take a look at our Glossary and the Data Dictionary . Repository Structure The repository is organized as follows: /src : Contains the main C++ API definition and utility classes (including yxml ). /docs : Contains additional documentation, such as the CLI syntax. /examples : Arduino sketches demonstrating how to use the API. /json : JSON schemas for the API events. /swagger : The OpenAPI 3.0 specification for the REST API. /webtool : A web-based tool for interacting with the API. /xml : XML schemas and examples. Getting Started To use the xTrainAPI in your own Arduino projects, follow these steps: Install the Library: Download the repository as a ZIP file. In the Arduino IDE, go to Sketch -> Include Library -> Add .ZIP Library... and select the downloaded file. Alternatively, you can install it manually by copying the repository folder into your Arduino libraries folder. Implement the Interface: Create a new class in your sketch that inherits from IUnifiedModelTrainListener and implement the methods for the events you want to handle. Process Events: In your loop() function, you can use one of the utility classes (like CmdLineParser or XmlParser ) to parse incoming data and trigger the corresponding events in your listener class. Running the Examples The /examples directory contains several sketches that demonstrate the functionality of the API. To run them, you will need to have the Arduino IDE or arduino-cli installed. Open one of the example sketches (e.g., examples/debug_cli/debug_cli.ino ) in the Arduino IDE. Select your board and port. Upload the sketch to your Arduino. Open the Serial Monitor to interact with the example. Contributing We welcome contributions! Please read our AGENTS.md before making any changes to the code.","title":"Home"},{"location":"#xtrainapi-unified-model-train-control","text":"Welcome to the xTrainAPI project! This repository contains a C++-based API for controlling digital model trains and their accessories.","title":"xTrainAPI - Unified Model Train Control"},{"location":"#summary","text":"xTrainAPI is a unified interface designed to control various digital model train systems through a single, consistent API. It simplifies the development of control software by abstracting the complexities of individual protocols, such as DCC and M\u00e4rklin Motorola. The API is defined in C++ as an abstract interface ( IUnifiedModelTrainListener ) and serves as the \"Single Source of Truth.\" All other artifacts, including XML schemas, the OpenAPI specification, and utility classes, are derived from this central C++ header file. This repository provides the core API, documentation, and a set of examples to help you get started.","title":"Summary"},{"location":"#documentation","text":"Our API documentation is automatically generated and hosted on GitHub Pages. Doxygen (C++ API): Detailed documentation of the C++ interface, classes, and methods can be found here: Doxygen Documentation Swagger (REST API): The specification for our REST interface, including interactive endpoints, is available here: Swagger UI Web Tool: A simple web application for interacting with the xTrainAPI is available here: Web Tool","title":"Documentation"},{"location":"#core-concepts","text":"The API is defined in C++ as an abstract interface ( IUnifiedModelTrainListener ) and serves as the \"Single Source of Truth\". All other artifacts, such as the XML schemas and the OpenAPI specification, are derived from this C++ header file. For a deeper understanding of the terms and data fields used in the API, please take a look at our Glossary and the Data Dictionary .","title":"Core Concepts"},{"location":"#repository-structure","text":"The repository is organized as follows: /src : Contains the main C++ API definition and utility classes (including yxml ). /docs : Contains additional documentation, such as the CLI syntax. /examples : Arduino sketches demonstrating how to use the API. /json : JSON schemas for the API events. /swagger : The OpenAPI 3.0 specification for the REST API. /webtool : A web-based tool for interacting with the API. /xml : XML schemas and examples.","title":"Repository Structure"},{"location":"#getting-started","text":"To use the xTrainAPI in your own Arduino projects, follow these steps: Install the Library: Download the repository as a ZIP file. In the Arduino IDE, go to Sketch -> Include Library -> Add .ZIP Library... and select the downloaded file. Alternatively, you can install it manually by copying the repository folder into your Arduino libraries folder. Implement the Interface: Create a new class in your sketch that inherits from IUnifiedModelTrainListener and implement the methods for the events you want to handle. Process Events: In your loop() function, you can use one of the utility classes (like CmdLineParser or XmlParser ) to parse incoming data and trigger the corresponding events in your listener class.","title":"Getting Started"},{"location":"#running-the-examples","text":"The /examples directory contains several sketches that demonstrate the functionality of the API. To run them, you will need to have the Arduino IDE or arduino-cli installed. Open one of the example sketches (e.g., examples/debug_cli/debug_cli.ino ) in the Arduino IDE. Select your board and port. Upload the sketch to your Arduino. Open the Serial Monitor to interact with the example.","title":"Running the Examples"},{"location":"#contributing","text":"We welcome contributions! Please read our AGENTS.md before making any changes to the code.","title":"Contributing"},{"location":"DATA_DICTIONARY.en/","text":"Here is the complete Data Dictionary for the UnifiedTrainAPI as a GitHub-flavored Markdown table. You can copy this block directly into your README.md or wiki page. xTrainAPI Data Dictionary This table describes all fields, parameters, and data types used in the UnifiedTrainAPI . Category Field / Parameter Data Type Description Valid Range / Values Notes Core Protocol enum List of all supported protocols. DCC , MM_I , MM_II , MFX , SELECTRIX , SX2 , LOCONET , BIDIB , XPRESSNET , CAN_GENERIC Determines the driver to be used. Core mobAddress uint16_t The digital address of the decoder. 1 - 10239 (DCC) 1 - 255 (MM) 1 - 127 (SX) Is ignored if mfxUid is set. Core mobMfxUid uint32_t Unique Hardware ID (UID) for mfx/BiDiB. 0 = Inactive >0 = Valid UID Takes precedence over the address (routing priority). Core direction enum Logical travel direction. REVERSE (0) FORWARD (1) UNKNOWN (2) Used for commands and feedback. Traffic mobSpeedPercent float Target speed of the locomotive. 0.0 (Stop) to 100.0 (Vmax) Must be converted by the driver into speed steps (14/28/128). Traffic mobSpeedSteps int Resolution of the speed steps for the command. 14 , 28 , 128 Important for correct DCC packet generation. Traffic mobFuncX int Index of the function key. 0 (Light) 1 - 32767 (Aux) RCN-227 defines up to F68, int is future-proof. Traffic mobFuncActive bool Status of a binary function (switch). true = ON false = OFF Standard for F-keys. Traffic mobFuncAnalog0to1 float Value of an analog function (pressure/intensity). 0.0 to 1.0 For onLocoFunctionAnalogValue (e.g., WiThrottle). Traffic mobIsAcquired bool Status of slot management (dispatching). true = Acquired by controller false = Released Relevant for LocoNet/XpressNet arbitration. Traffic mobOwnerId string ID of the device controlling the locomotive. e.g., \"Throttle #54\", \"JMRI\" Debug info. Traffic mobConsist enum Method of multiple traction. ADVANCED_DCC (CV19) UNIVERSAL_HOST (Software) MU_LOCONET Determines the type of linking/addressing. Traffic mobInverted bool Orientation in the consist. true = Slave runs in opposite direction false = Same direction For onConsistLink . Accessory statAddress uint16_t Address of the accessory decoder. Protocol-dependent (usually 1 - 2048 ) For turnouts and signals. Accessory statIsThrown bool State of a standard turnout. true = Thrown/Red false = Straight/Green Basic function. Accessory statIsFeedback bool Source of the event. true = Actual feedback (RailCom) false = Command echo Important for automation validation (safety). Accessory statAspect uint8_t Signal aspect. 0 to 255 For complex signals (Hp0, Hp1, Sh1...). Accessory statAnalog0to1 float Analog accessory value (servo/dimmer). 0.0 to 1.0 Normalized float. Accessory statError uint8_t Diagnostic error code. 1 =OpenLoad 2 =Overload/Short 3 =Stall Hardware diagnostics (BiDiB/RailCom Port Status). Accessory statErrorDesc string Readable error description. Text For UI display. System PowerState enum Global power status. OFF (0) ON (1) EMERGENCY_STOP (2) SHORT_CIRCUIT (3) Distinguishes between logical emergency stop and physical short circuit. System modelTimeUnix int64_t Current model time (RCN-211). Unix Timestamp (seconds since 1970) Contains year, month, day, time for DCC Time/Date packets. System factor float Time acceleration factor. e.g., 1.0 (Real-time), 4.0 (Fast) Sync for handheld controller clocks (LocoNet/XpressNet). System nodeUid string Unique Hardware ID of a bus node. e.g., \"05:00:AB:C1\" Uniquely identifies boosters/detectors in the bus tree. System productName string Product name of the hardware. e.g., \"GBM16T\", \"Z21\" UI display of the topology. System booster bool Power supply capability. true = Is a booster false = Logic only Filter for UI (Power Management). System message string System-wide text message. Text Chat, logs, or LISSY text. Telemetry sensorId uint32_t ID of a feedback sensor/block. System-dependent 32-bit ID Maps to S88 port, LNet sensor, BiDiB input. Telemetry DecoderOrientation enum Locomotive orientation on the track (RCN-217). NORMAL (Chimney first) INVERTED (Tender first) UNKNOWN Critical for shuttle train control and automation. Telemetry ExternalState enum External influence. FREE_RUN STOPPED_BY_ABC STOPPED_BY_DC STOPPED_BY_HLU Indicates if the track is braking the loco (despite throttle > 0). Telemetry TelemetryType enum Type of the measured value. SPEED , LOAD , VOLTAGE , CURRENT , FUEL , TEMP , QOS , ODOMETER Defines the unit of value . Telemetry value (Telemetry) float The measured value. KM/H, %, Volt, Ampere, \u00b0C Depends on TelemetryType . Telemetry appId uint8_t RailCom application ID. 0 to 255 For proprietary raw data (manufacturer-specific). Telemetry data (Raw) vector<u8> Raw data payload. Byte Array For RailCom Raw or Config Blocks. Config cvNumber int Index of the configuration variable. 1 to 1024 (DCC) 1 to 65535 (Index) Address in the decoder's memory. Config bankIndex uint8_t Sound bank for SUSI. 0 to 3 Usually mapped via CV 1024/897. Config susiIndex uint8_t Parameter within the SUSI bank. 0 to 255 The \"CV\" in the SUSI module. Config domain string Type of the mass data block. \"ICON\", \"FIRMWARE\", \"MFX_CONFIG\" Context for onConfigBlockLoaded . Config operation string Name of the ongoing process. e.g., \"Reading CV List\" For progress bars/UI. Config percent float Progress. 0.0 to 100.0 UI feedback. Config success bool Result of an operation. true = ACK received false = Timeout/NACK Success check for CV reads.","title":"Data Dictionary"},{"location":"DATA_DICTIONARY.en/#xtrainapi-data-dictionary","text":"This table describes all fields, parameters, and data types used in the UnifiedTrainAPI . Category Field / Parameter Data Type Description Valid Range / Values Notes Core Protocol enum List of all supported protocols. DCC , MM_I , MM_II , MFX , SELECTRIX , SX2 , LOCONET , BIDIB , XPRESSNET , CAN_GENERIC Determines the driver to be used. Core mobAddress uint16_t The digital address of the decoder. 1 - 10239 (DCC) 1 - 255 (MM) 1 - 127 (SX) Is ignored if mfxUid is set. Core mobMfxUid uint32_t Unique Hardware ID (UID) for mfx/BiDiB. 0 = Inactive >0 = Valid UID Takes precedence over the address (routing priority). Core direction enum Logical travel direction. REVERSE (0) FORWARD (1) UNKNOWN (2) Used for commands and feedback. Traffic mobSpeedPercent float Target speed of the locomotive. 0.0 (Stop) to 100.0 (Vmax) Must be converted by the driver into speed steps (14/28/128). Traffic mobSpeedSteps int Resolution of the speed steps for the command. 14 , 28 , 128 Important for correct DCC packet generation. Traffic mobFuncX int Index of the function key. 0 (Light) 1 - 32767 (Aux) RCN-227 defines up to F68, int is future-proof. Traffic mobFuncActive bool Status of a binary function (switch). true = ON false = OFF Standard for F-keys. Traffic mobFuncAnalog0to1 float Value of an analog function (pressure/intensity). 0.0 to 1.0 For onLocoFunctionAnalogValue (e.g., WiThrottle). Traffic mobIsAcquired bool Status of slot management (dispatching). true = Acquired by controller false = Released Relevant for LocoNet/XpressNet arbitration. Traffic mobOwnerId string ID of the device controlling the locomotive. e.g., \"Throttle #54\", \"JMRI\" Debug info. Traffic mobConsist enum Method of multiple traction. ADVANCED_DCC (CV19) UNIVERSAL_HOST (Software) MU_LOCONET Determines the type of linking/addressing. Traffic mobInverted bool Orientation in the consist. true = Slave runs in opposite direction false = Same direction For onConsistLink . Accessory statAddress uint16_t Address of the accessory decoder. Protocol-dependent (usually 1 - 2048 ) For turnouts and signals. Accessory statIsThrown bool State of a standard turnout. true = Thrown/Red false = Straight/Green Basic function. Accessory statIsFeedback bool Source of the event. true = Actual feedback (RailCom) false = Command echo Important for automation validation (safety). Accessory statAspect uint8_t Signal aspect. 0 to 255 For complex signals (Hp0, Hp1, Sh1...). Accessory statAnalog0to1 float Analog accessory value (servo/dimmer). 0.0 to 1.0 Normalized float. Accessory statError uint8_t Diagnostic error code. 1 =OpenLoad 2 =Overload/Short 3 =Stall Hardware diagnostics (BiDiB/RailCom Port Status). Accessory statErrorDesc string Readable error description. Text For UI display. System PowerState enum Global power status. OFF (0) ON (1) EMERGENCY_STOP (2) SHORT_CIRCUIT (3) Distinguishes between logical emergency stop and physical short circuit. System modelTimeUnix int64_t Current model time (RCN-211). Unix Timestamp (seconds since 1970) Contains year, month, day, time for DCC Time/Date packets. System factor float Time acceleration factor. e.g., 1.0 (Real-time), 4.0 (Fast) Sync for handheld controller clocks (LocoNet/XpressNet). System nodeUid string Unique Hardware ID of a bus node. e.g., \"05:00:AB:C1\" Uniquely identifies boosters/detectors in the bus tree. System productName string Product name of the hardware. e.g., \"GBM16T\", \"Z21\" UI display of the topology. System booster bool Power supply capability. true = Is a booster false = Logic only Filter for UI (Power Management). System message string System-wide text message. Text Chat, logs, or LISSY text. Telemetry sensorId uint32_t ID of a feedback sensor/block. System-dependent 32-bit ID Maps to S88 port, LNet sensor, BiDiB input. Telemetry DecoderOrientation enum Locomotive orientation on the track (RCN-217). NORMAL (Chimney first) INVERTED (Tender first) UNKNOWN Critical for shuttle train control and automation. Telemetry ExternalState enum External influence. FREE_RUN STOPPED_BY_ABC STOPPED_BY_DC STOPPED_BY_HLU Indicates if the track is braking the loco (despite throttle > 0). Telemetry TelemetryType enum Type of the measured value. SPEED , LOAD , VOLTAGE , CURRENT , FUEL , TEMP , QOS , ODOMETER Defines the unit of value . Telemetry value (Telemetry) float The measured value. KM/H, %, Volt, Ampere, \u00b0C Depends on TelemetryType . Telemetry appId uint8_t RailCom application ID. 0 to 255 For proprietary raw data (manufacturer-specific). Telemetry data (Raw) vector<u8> Raw data payload. Byte Array For RailCom Raw or Config Blocks. Config cvNumber int Index of the configuration variable. 1 to 1024 (DCC) 1 to 65535 (Index) Address in the decoder's memory. Config bankIndex uint8_t Sound bank for SUSI. 0 to 3 Usually mapped via CV 1024/897. Config susiIndex uint8_t Parameter within the SUSI bank. 0 to 255 The \"CV\" in the SUSI module. Config domain string Type of the mass data block. \"ICON\", \"FIRMWARE\", \"MFX_CONFIG\" Context for onConfigBlockLoaded . Config operation string Name of the ongoing process. e.g., \"Reading CV List\" For progress bars/UI. Config percent float Progress. 0.0 to 100.0 UI feedback. Config success bool Result of an operation. true = ACK received false = Timeout/NACK Success check for CV reads.","title":"xTrainAPI Data Dictionary"},{"location":"OPEN_ISSUES.en/","text":"Open Issues This document lists the DCC commands that are not currently handled by the NmraDcc library. Unhandled DCC Commands RCN-212 - All Commands for Vehicle Decoders RCN-213 - All Commands for Accessory Decoders RCN-214 - All Commands for Configuration Extended Packet Format Decoder Control Command Advanced Operation Commands Accessory Decoder Commands Function group 2 Configuration Variable Access Commands CV read CV write Bit manipulation Consist Control Consist setup and activation Extended Accessory Control Signal aspect control Sensor and Feedback Sensor status reporting System Information Version and hardware info Power Management Track power control Route Control Special Commands Emergency Stop Reset","title":"Open Issues"},{"location":"OPEN_ISSUES.en/#open-issues","text":"This document lists the DCC commands that are not currently handled by the NmraDcc library.","title":"Open Issues"},{"location":"OPEN_ISSUES.en/#unhandled-dcc-commands","text":"RCN-212 - All Commands for Vehicle Decoders RCN-213 - All Commands for Accessory Decoders RCN-214 - All Commands for Configuration Extended Packet Format Decoder Control Command Advanced Operation Commands Accessory Decoder Commands Function group 2 Configuration Variable Access Commands CV read CV write Bit manipulation Consist Control Consist setup and activation Extended Accessory Control Signal aspect control Sensor and Feedback Sensor status reporting System Information Version and hardware info Power Management Track power control Route Control Special Commands Emergency Stop Reset","title":"Unhandled DCC Commands"},{"location":"XTTRAIN_GLOSSARY.en/","text":"Category Abbr. Full English Term Description / Context Type MobDec Mobile Decoder Standard locomotive decoder (Motor + Light). Type StatDec Stationary Decoder Accessory decoder for turnouts or signals. Output FL / F0f Front Light (Forward) Headlight output (White wire). Output RL / F0r Rear Light (Reverse) Taillight output (Yellow wire). Output AUX Auxiliary Output Physical function output (Green/Violet etc.). Output LOG Logic Level Output Unamplified signal (needs buffer circuit). Output CAM Cam / Sensor Input for wheel chuff sensor. Feature CV Configuration Variable The programmable settings slots. Feature POM Programming on Main Programming while the loco is on the layout. Feature BiDi Bidirectional Comm. RailCom\u00ae; feedback from decoder to command station.","title":"Glossary"},{"location":"docs/API_LINKS.en/","text":"API Reference C++ API (Doxygen) REST API (Swagger) Web Tool","title":"API Reference"},{"location":"docs/API_LINKS.en/#api-reference","text":"C++ API (Doxygen) REST API (Swagger) Web Tool","title":"API Reference"},{"location":"docs/CLI_SYNTAX.en/","text":"CLI Syntax This document defines the command-line interface (CLI) syntax for the xDuinoRails_xTrainAPI. It covers both the legacy DCC-EX single-character commands and the more self-descriptive extended syntax. Command Formats The CmdLineParser class is designed to accept both the legacy single-character commands and the extended commands at all times. The CmdLinePrinter class, however, can be configured to output either the legacy or extended format. This is controlled by the USE_EXTENDED_CLI_SYNTAX compile-time flag. By default, the extended syntax is used for output. To use the legacy syntax for output, set this flag to 0 during compilation. The extended syntax follows a consistent format: <COMMAND param1=\"value1\" param2=\"value2\" ...> . The legacy syntax uses single-character opcodes: <o p1 p2 ...> . EBNF (Syntax Definition) The Extended Backus-aur Form (EBNF) defines the \"grammar\" or structure of every message sent to or from the Command Station. ```ebnf ( A message is a single command or response, enclosed in angle brackets. ) message ::= \"<\" opcode ( \" \" parameter )* \">\" ( The opcode is ALWAYS a single character. It is case-sensitive (e.g., 'T' is a command, 't' is a response). ) opcode ::= CHARACTER ( Parameters are separated by spaces. ) parameter ::= keyword | numeric | string ( A keyword is a sequence of characters without spaces. It consists of letters (a-z, A-Z), digits (0-9), and/ or the underscore (_). Keywords are NOT case-sensitive. ) keyword ::= ( LETTER | DIGIT | \"_\" )+ ( A number is a sequence of digits. It can optionally have a negative prefix (-). Decimals or floating-point numbers are not supported. ) numeric ::= [ \"-\" ] DIGIT+ ( A string is any sequence of characters enclosed in double-quotes (\"). It may contain spaces. ) string ::= '\"' ( ANY_CHAR_EXCEPT_QUOTE )* '\"' ```` Command Table A. Track Power & Status Command Legacy Parameters Description Example POWER <1> / <0> state (\"ON\" or \"OFF\") Turns track power on or off. <POWER state=\"ON\"> SET_POWER <p> track (0=MAIN, 1=PROG), state (0=OFF, 1=ON) Sets the power for a specific track. <SET_POWER track=\"1\" state=\"1\"> STATUS <c> (none) Requests a detailed status report. <STATUS> FULL_STATUS <S> (none) Requests a full status dump of all devices. <FULL_STATUS> HARDWARE_INFO <i> (none) Requests hardware and board information. <HARDWARE_INFO> REBOOT <Z> (none) Reboots the command station. <REBOOT> B. Loco Control (Throttle) Command Legacy Parameters Description Example THROTTLE <t> cab , speed (0-126), direction (0=REV, 1=FWD), steps (14, 28, 128) Main throttle command. <THROTTLE cab=\"123\" speed=\"100\" direction=\"1\" steps=\"128\"> SIMPLE_THROTTLE <s> cab , speed (0-126), direction (0=REV, 1=FWD) Simple throttle command. <SIMPLE_THROTTLE cab=\"123\" speed=\"100\" direction=\"1\"> FUNCTION <f> / <F> cab , function (0-28), state (0=OFF, 1=ON) Toggles a locomotive function. <FUNCTION cab=\"123\" function=\"1\" state=\"1\"> LIST_LOCOS <l> (none) Lists all locos in the roster. <LIST_LOCOS> EMERGENCY_STOP_LOCO <X> cab Emergency stop for a single loco. <EMERGENCY_STOP_LOCO cab=\"123\"> EMERGENCY_STOP_ALL <K> (none) Emergency stop for all locos. <EMERGENCY_STOP_ALL> RESET_EMERGENCY_STOP_ALL <E> (none) Resets emergency stop for all locos. <RESET_EMERGENCY_STOP_ALL> DELETE_LOCO <R> cab Deletes a loco from the roster. <DELETE_LOCO cab=\"123\"> C. CV Programming Command Legacy Parameters Description Example READ_CV <R> cv , track (0=POM, 1=PROG) Reads a CV. <READ_CV cv=\"1\" track=\"1\"> WRITE_CV_BYTE <W> cv , value , track (0=POM, 1=PROG) Writes a byte to a CV. <WRITE_CV_BYTE cv=\"1\" value=\"123\" track=\"1\"> WRITE_CV_BIT <B> cv , bit , value , track (0=POM, 1=PROG) Writes a bit to a CV. <WRITE_CV_BIT cv=\"1\" bit=\"7\" value=\"1\" track=\"1\"> PAGED_MODE_WRITE <P> cv , value Paged mode CV write. <PAGED_MODE_WRITE cv=\"1\" value=\"123\"> DIRECT_MODE_WRITE <M> address , value Direct mode register write. <DIRECT_MODE_WRITE address=\"1024\" value=\"123\"> D. Accessories Command Legacy Parameters Description Example TURNOUT <T> id , state (0=THROWN, 1=STRAIGHT) Sets a turnout's state. <TURNOUT id=\"456\" state=\"1\"> ACCESSORY <Q> id , state (0=OFF, 1=ON) Sets an accessory's state. <ACCESSORY id=\"789\" state=\"1\"> E. Sensors & I/O Command Legacy Parameters Description Example VPIN <Y> id , state (0/1) Manually sets a VPIN's state. <VPIN id=\"1\" state=\"1\"> DEFINE_VPIN <N> vpin , type , state (0/1) Defines a VPIN. <DEFINE_VPIN vpin=\"1\" type=\"INPUT\" state=\"0\"> UNDEFINE_VPIN <U> vpin Undefines a VPIN. <UNDEFINE_VPIN vpin=\"1\"> F. JSON Commands Command Legacy Parameters Description Example JSON_QUERY <J> type (\"T\", \"A\", \"L\", \"S\", \"O\", \"R\", \"C\") Requests data in JSON format. <JSON_QUERY type=\"T\"> JSON_CONFIG <=> json Sends a configuration command in JSON. <JSON_CONFIG json=\"{...}\"> G. Diagnostics & System Command Legacy Parameters Description Example DIAGNOSTIC <D> command , params Performs various diagnostic actions. <DIAGNOSTIC command=\"RAM\"> LIST_VARIABLES <V> (none) Lists all defined variables. <LIST_VARIABLES> ECHO <+> / <-> state (\"ON\" or \"OFF\") Activates or deactivates echo mode. <ECHO state=\"ON\"> LIST_COMMANDS <?> (none) Requests a list of available commands. <LIST_COMMANDS> H. Proposed New Commands These commands are proposed to cover events in the IUnifiedModelTrainListener interface that are not covered by the legacy DCC-EX syntax. Command Description Parameters Example LOCO_FUNCTION_ANALOG Sets an analog value for a loco function. cab , function , value <LOCO_FUNCTION_ANALOG cab=\"123\" function=\"8\" value=\"255\"> DISPATCH Changes the dispatch state of a loco. cab , state (\"ACQUIRED\" or \"RELEASED\"), owner <DISPATCH cab=\"123\" state=\"ACQUIRED\" owner=\"user1\"> CONSIST_LINK Links two locos in a consist. master , slave , type , inverted (true/false) <CONSIST_LINK master=\"123\" slave=\"456\" type=\"ADVANCED\" inverted=\"false\"> CONSIST_UNLINK Unlinks a loco from a consist. slave <CONSIST_UNLINK slave=\"456\"> ACCESSORY_ANALOG Sets an analog value for an accessory. address , value (0.0-1.0) <ACCESSORY_ANALOG address=\"789\" value=\"0.75\"> ACCESSORY_ERROR Reports an accessory error. address , errorId , errorMessage <ACCESSORY_ERROR address=\"789\" errorId=\"1\" errorMessage=\"Overload\"> SENSOR Sets the state of a sensor. id , state (\"ACTIVE\" or \"INACTIVE\") <SENSOR id=\"101\" state=\"ACTIVE\"> FAST_CLOCK Updates the fast clock. time (Unix timestamp), factor <FAST_CLOCK time=\"1678886400\" factor=\"4.0\"> HARDWARE_NODE_ATTACHED Reports a new hardware node. uid , productName , booster (true/false) <HARDWARE_NODE_ATTACHED uid=\"abc-123\" productName=\"xPressNet\" booster=\"false\"> HARDWARE_NODE_LOST Reports a lost hardware node. uid <HARDWARE_NODE_LOST uid=\"abc-123\"> SYSTEM_MESSAGE Sends a system message. source , message <SYSTEM_MESSAGE source=\"WebServer\" message=\"User logged in\"> LOCO_DETECTED_ON_BLOCK Reports a loco detected on a block. sensorId , cab , orientation (\"FORWARD\" or \"REVERSE\") <LOCO_DETECTED_ON_BLOCK sensorId=\"202\" cab=\"123\" orientation=\"FORWARD\"> LOCO_TELEMETRY Reports telemetry data for a loco. cab , type , value <LOCO_TELEMETRY cab=\"123\" type=\"SPEED\" value=\"50.5\"> LOCO_EXTERNAL_STATE Changes the external state of a loco. cab , state <LOCO_EXTERNAL_STATE cab=\"123\" state=\"PARKED\"> LOCO_RAILCOM_RAW Sends raw RailCom data. cab , appId , data (hex string) <LOCO_RAILCOM_RAW cab=\"123\" appId=\"1\" data=\"A0B1C2\"> NEW_LOCO_DISCOVERED Reports a newly discovered loco. cab , name , icon <NEW_LOCO_DISCOVERED cab=\"123\" name=\"Big Boy\" icon=\"steam_loco.png\"> CV_READ_RESULT Reports the result of a CV read. cab , cv , value , success (true/false) <CV_READ_RESULT cab=\"123\" cv=\"1\" value=\"10\" success=\"true\"> SUSI_CONFIG_READ Reports the result of a SUSI config read. cab , bank , index , value <SUSI_CONFIG_READ cab=\"123\" bank=\"1\" index=\"2\" value=\"3\"> CONFIG_BLOCK_LOADED Reports that a config block has been loaded. cab , domain , data (hex string) <CONFIG_BLOCK_LOADED cab=\"123\" domain=\"sound\" data=\"DEADBEEF\"> PROGRESS_UPDATE Reports the progress of an operation. operation , percent <PROGRESS_UPDATE operation=\"Firmware Update\" percent=\"75.5\"> MECHANICAL_SYNC_EVENT Reports a mechanical sync event. cab , type , value <MECHANICAL_SYNC_EVENT cab=\"123\" type=\"CHUFF\" value=\"1\">","title":"CLI Syntax"},{"location":"docs/CLI_SYNTAX.en/#cli-syntax","text":"This document defines the command-line interface (CLI) syntax for the xDuinoRails_xTrainAPI. It covers both the legacy DCC-EX single-character commands and the more self-descriptive extended syntax.","title":"CLI Syntax"},{"location":"docs/CLI_SYNTAX.en/#command-formats","text":"The CmdLineParser class is designed to accept both the legacy single-character commands and the extended commands at all times. The CmdLinePrinter class, however, can be configured to output either the legacy or extended format. This is controlled by the USE_EXTENDED_CLI_SYNTAX compile-time flag. By default, the extended syntax is used for output. To use the legacy syntax for output, set this flag to 0 during compilation. The extended syntax follows a consistent format: <COMMAND param1=\"value1\" param2=\"value2\" ...> . The legacy syntax uses single-character opcodes: <o p1 p2 ...> .","title":"Command Formats"},{"location":"docs/CLI_SYNTAX.en/#ebnf-syntax-definition","text":"The Extended Backus-aur Form (EBNF) defines the \"grammar\" or structure of every message sent to or from the Command Station. ```ebnf ( A message is a single command or response, enclosed in angle brackets. ) message ::= \"<\" opcode ( \" \" parameter )* \">\" ( The opcode is ALWAYS a single character. It is case-sensitive (e.g., 'T' is a command, 't' is a response). ) opcode ::= CHARACTER ( Parameters are separated by spaces. ) parameter ::= keyword | numeric | string ( A keyword is a sequence of characters without spaces. It consists of letters (a-z, A-Z), digits (0-9), and/ or the underscore (_). Keywords are NOT case-sensitive. ) keyword ::= ( LETTER | DIGIT | \"_\" )+ ( A number is a sequence of digits. It can optionally have a negative prefix (-). Decimals or floating-point numbers are not supported. ) numeric ::= [ \"-\" ] DIGIT+ ( A string is any sequence of characters enclosed in double-quotes (\"). It may contain spaces. ) string ::= '\"' ( ANY_CHAR_EXCEPT_QUOTE )* '\"' ````","title":"EBNF (Syntax Definition)"},{"location":"docs/CLI_SYNTAX.en/#command-table","text":"","title":"Command Table"},{"location":"docs/CLI_SYNTAX.en/#a-track-power-status","text":"Command Legacy Parameters Description Example POWER <1> / <0> state (\"ON\" or \"OFF\") Turns track power on or off. <POWER state=\"ON\"> SET_POWER <p> track (0=MAIN, 1=PROG), state (0=OFF, 1=ON) Sets the power for a specific track. <SET_POWER track=\"1\" state=\"1\"> STATUS <c> (none) Requests a detailed status report. <STATUS> FULL_STATUS <S> (none) Requests a full status dump of all devices. <FULL_STATUS> HARDWARE_INFO <i> (none) Requests hardware and board information. <HARDWARE_INFO> REBOOT <Z> (none) Reboots the command station. <REBOOT>","title":"A. Track Power &amp; Status"},{"location":"docs/CLI_SYNTAX.en/#b-loco-control-throttle","text":"Command Legacy Parameters Description Example THROTTLE <t> cab , speed (0-126), direction (0=REV, 1=FWD), steps (14, 28, 128) Main throttle command. <THROTTLE cab=\"123\" speed=\"100\" direction=\"1\" steps=\"128\"> SIMPLE_THROTTLE <s> cab , speed (0-126), direction (0=REV, 1=FWD) Simple throttle command. <SIMPLE_THROTTLE cab=\"123\" speed=\"100\" direction=\"1\"> FUNCTION <f> / <F> cab , function (0-28), state (0=OFF, 1=ON) Toggles a locomotive function. <FUNCTION cab=\"123\" function=\"1\" state=\"1\"> LIST_LOCOS <l> (none) Lists all locos in the roster. <LIST_LOCOS> EMERGENCY_STOP_LOCO <X> cab Emergency stop for a single loco. <EMERGENCY_STOP_LOCO cab=\"123\"> EMERGENCY_STOP_ALL <K> (none) Emergency stop for all locos. <EMERGENCY_STOP_ALL> RESET_EMERGENCY_STOP_ALL <E> (none) Resets emergency stop for all locos. <RESET_EMERGENCY_STOP_ALL> DELETE_LOCO <R> cab Deletes a loco from the roster. <DELETE_LOCO cab=\"123\">","title":"B. Loco Control (Throttle)"},{"location":"docs/CLI_SYNTAX.en/#c-cv-programming","text":"Command Legacy Parameters Description Example READ_CV <R> cv , track (0=POM, 1=PROG) Reads a CV. <READ_CV cv=\"1\" track=\"1\"> WRITE_CV_BYTE <W> cv , value , track (0=POM, 1=PROG) Writes a byte to a CV. <WRITE_CV_BYTE cv=\"1\" value=\"123\" track=\"1\"> WRITE_CV_BIT <B> cv , bit , value , track (0=POM, 1=PROG) Writes a bit to a CV. <WRITE_CV_BIT cv=\"1\" bit=\"7\" value=\"1\" track=\"1\"> PAGED_MODE_WRITE <P> cv , value Paged mode CV write. <PAGED_MODE_WRITE cv=\"1\" value=\"123\"> DIRECT_MODE_WRITE <M> address , value Direct mode register write. <DIRECT_MODE_WRITE address=\"1024\" value=\"123\">","title":"C. CV Programming"},{"location":"docs/CLI_SYNTAX.en/#d-accessories","text":"Command Legacy Parameters Description Example TURNOUT <T> id , state (0=THROWN, 1=STRAIGHT) Sets a turnout's state. <TURNOUT id=\"456\" state=\"1\"> ACCESSORY <Q> id , state (0=OFF, 1=ON) Sets an accessory's state. <ACCESSORY id=\"789\" state=\"1\">","title":"D. Accessories"},{"location":"docs/CLI_SYNTAX.en/#e-sensors-io","text":"Command Legacy Parameters Description Example VPIN <Y> id , state (0/1) Manually sets a VPIN's state. <VPIN id=\"1\" state=\"1\"> DEFINE_VPIN <N> vpin , type , state (0/1) Defines a VPIN. <DEFINE_VPIN vpin=\"1\" type=\"INPUT\" state=\"0\"> UNDEFINE_VPIN <U> vpin Undefines a VPIN. <UNDEFINE_VPIN vpin=\"1\">","title":"E. Sensors &amp; I/O"},{"location":"docs/CLI_SYNTAX.en/#f-json-commands","text":"Command Legacy Parameters Description Example JSON_QUERY <J> type (\"T\", \"A\", \"L\", \"S\", \"O\", \"R\", \"C\") Requests data in JSON format. <JSON_QUERY type=\"T\"> JSON_CONFIG <=> json Sends a configuration command in JSON. <JSON_CONFIG json=\"{...}\">","title":"F. JSON Commands"},{"location":"docs/CLI_SYNTAX.en/#g-diagnostics-system","text":"Command Legacy Parameters Description Example DIAGNOSTIC <D> command , params Performs various diagnostic actions. <DIAGNOSTIC command=\"RAM\"> LIST_VARIABLES <V> (none) Lists all defined variables. <LIST_VARIABLES> ECHO <+> / <-> state (\"ON\" or \"OFF\") Activates or deactivates echo mode. <ECHO state=\"ON\"> LIST_COMMANDS <?> (none) Requests a list of available commands. <LIST_COMMANDS>","title":"G. Diagnostics &amp; System"},{"location":"docs/CLI_SYNTAX.en/#h-proposed-new-commands","text":"These commands are proposed to cover events in the IUnifiedModelTrainListener interface that are not covered by the legacy DCC-EX syntax. Command Description Parameters Example LOCO_FUNCTION_ANALOG Sets an analog value for a loco function. cab , function , value <LOCO_FUNCTION_ANALOG cab=\"123\" function=\"8\" value=\"255\"> DISPATCH Changes the dispatch state of a loco. cab , state (\"ACQUIRED\" or \"RELEASED\"), owner <DISPATCH cab=\"123\" state=\"ACQUIRED\" owner=\"user1\"> CONSIST_LINK Links two locos in a consist. master , slave , type , inverted (true/false) <CONSIST_LINK master=\"123\" slave=\"456\" type=\"ADVANCED\" inverted=\"false\"> CONSIST_UNLINK Unlinks a loco from a consist. slave <CONSIST_UNLINK slave=\"456\"> ACCESSORY_ANALOG Sets an analog value for an accessory. address , value (0.0-1.0) <ACCESSORY_ANALOG address=\"789\" value=\"0.75\"> ACCESSORY_ERROR Reports an accessory error. address , errorId , errorMessage <ACCESSORY_ERROR address=\"789\" errorId=\"1\" errorMessage=\"Overload\"> SENSOR Sets the state of a sensor. id , state (\"ACTIVE\" or \"INACTIVE\") <SENSOR id=\"101\" state=\"ACTIVE\"> FAST_CLOCK Updates the fast clock. time (Unix timestamp), factor <FAST_CLOCK time=\"1678886400\" factor=\"4.0\"> HARDWARE_NODE_ATTACHED Reports a new hardware node. uid , productName , booster (true/false) <HARDWARE_NODE_ATTACHED uid=\"abc-123\" productName=\"xPressNet\" booster=\"false\"> HARDWARE_NODE_LOST Reports a lost hardware node. uid <HARDWARE_NODE_LOST uid=\"abc-123\"> SYSTEM_MESSAGE Sends a system message. source , message <SYSTEM_MESSAGE source=\"WebServer\" message=\"User logged in\"> LOCO_DETECTED_ON_BLOCK Reports a loco detected on a block. sensorId , cab , orientation (\"FORWARD\" or \"REVERSE\") <LOCO_DETECTED_ON_BLOCK sensorId=\"202\" cab=\"123\" orientation=\"FORWARD\"> LOCO_TELEMETRY Reports telemetry data for a loco. cab , type , value <LOCO_TELEMETRY cab=\"123\" type=\"SPEED\" value=\"50.5\"> LOCO_EXTERNAL_STATE Changes the external state of a loco. cab , state <LOCO_EXTERNAL_STATE cab=\"123\" state=\"PARKED\"> LOCO_RAILCOM_RAW Sends raw RailCom data. cab , appId , data (hex string) <LOCO_RAILCOM_RAW cab=\"123\" appId=\"1\" data=\"A0B1C2\"> NEW_LOCO_DISCOVERED Reports a newly discovered loco. cab , name , icon <NEW_LOCO_DISCOVERED cab=\"123\" name=\"Big Boy\" icon=\"steam_loco.png\"> CV_READ_RESULT Reports the result of a CV read. cab , cv , value , success (true/false) <CV_READ_RESULT cab=\"123\" cv=\"1\" value=\"10\" success=\"true\"> SUSI_CONFIG_READ Reports the result of a SUSI config read. cab , bank , index , value <SUSI_CONFIG_READ cab=\"123\" bank=\"1\" index=\"2\" value=\"3\"> CONFIG_BLOCK_LOADED Reports that a config block has been loaded. cab , domain , data (hex string) <CONFIG_BLOCK_LOADED cab=\"123\" domain=\"sound\" data=\"DEADBEEF\"> PROGRESS_UPDATE Reports the progress of an operation. operation , percent <PROGRESS_UPDATE operation=\"Firmware Update\" percent=\"75.5\"> MECHANICAL_SYNC_EVENT Reports a mechanical sync event. cab , type , value <MECHANICAL_SYNC_EVENT cab=\"123\" type=\"CHUFF\" value=\"1\">","title":"H. Proposed New Commands"}]}